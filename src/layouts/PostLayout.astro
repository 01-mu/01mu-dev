---
import BaseLayout from "./BaseLayout.astro";
import TableOfContents from "../components/TableOfContents.astro";

const { title, date, tags = [], description, headings = [] } = Astro.props;
const formattedDate = new Date(date).toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<BaseLayout
  title={title}
  description={description}
  mainClass="main--post"
  headerVariant="post"
>
  <div class="post-layout">
    <article class="post-content">
      <p class="prose-meta">{formattedDate}</p>
      <h1 class="page-title">{title}</h1>
      {tags.length > 0 && (
        <div class="tag-list">
          {tags.map((tag) => (
            <a class="tag-pill" href={`/tags/${encodeURIComponent(tag)}`}>{tag}</a>
          ))}
        </div>
      )}
      <slot />
    </article>
    <aside class="post-toc">
      <div class="post-author">
        <div class="author-name">01-mu</div>
        <div class="author-handle">@01mu_dev</div>
        <div class="author-links">
          <a
            href="https://x.com/01mu_dev"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="X"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M14.234 10.162 22.977 0h-2.072l-7.591 8.824L7.251 0H.258l9.168 13.343L.258 24H2.33l8.016-9.318L16.749 24h6.993zm-2.837 3.299-.929-1.329L3.076 1.56h3.182l5.965 8.532.929 1.329 7.754 11.09h-3.182z"
              />
            </svg>
          </a>
          <a
            href="https://github.com/01mu-dev"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="GitHub"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M12 2.2a9.8 9.8 0 0 0-3.1 19.1c.5.1.7-.2.7-.5v-1.8c-2.8.6-3.4-1.2-3.4-1.2-.4-1.1-1.1-1.4-1.1-1.4-.9-.6.1-.6.1-.6 1 .1 1.5 1 1.5 1 .9 1.5 2.5 1.1 3.1.8.1-.6.4-1.1.7-1.3-2.2-.3-4.5-1.1-4.5-5a3.9 3.9 0 0 1 1-2.7c-.1-.2-.4-1.2.1-2.5 0 0 .9-.3 2.8 1a9.6 9.6 0 0 1 5.1 0c1.9-1.3 2.8-1 2.8-1 .5 1.3.2 2.3.1 2.5a3.9 3.9 0 0 1 1 2.7c0 4-2.3 4.7-4.5 5 .4.3.8 1 .8 2.1v3.1c0 .3.2.6.7.5A9.8 9.8 0 0 0 12 2.2Z"
              />
            </svg>
          </a>
          <a
            href="https://zenn.dev/01mu"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Zenn"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                fill="currentColor"
                d="M.264 23.771h4.984c.264 0 .498-.147.645-.352L19.614.874c.176-.293-.029-.645-.381-.645h-4.72c-.235 0-.44.117-.557.323L.03 23.361c-.088.176.029.41.234.41zM17.445 23.419l6.479-10.408c.205-.323-.029-.733-.41-.733h-4.691c-.176 0-.352.088-.44.235l-6.655 10.643c-.176.264.029.616.352.616h4.779c.234-.001.468-.118.586-.353z"
              />
            </svg>
          </a>
        </div>
      </div>
      <div class="sidebar-divider" aria-hidden="true"></div>
      <TableOfContents headings={headings} />
    </aside>
  </div>
</BaseLayout>
